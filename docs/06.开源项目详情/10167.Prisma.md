---
title: Prisma
date: 2023-04-19 19:55:23
permalink: /pages/10167/
sidebar: false
article: false
---
::: note å¼€æºåœ°å€
Githubï¼š[https://www.prisma.io/](https://www.prisma.io/)
:::
[![æ£±é•œ](https://camo.githubusercontent.com/001ae294ec710ba28e1cad6f1f398ddedf48518684700930fc1a111793e8dd2a/68747470733a2f2f692e696d6775722e636f6d2f683655495954752e706e67)](https://camo.githubusercontent.com/001ae294ec710ba28e1cad6f1f398ddedf48518684700930fc1a111793e8dd2a/68747470733a2f2f692e696d6775722e636f6d2f683655495954752e706e67)

# Prisma

[![img](https://camo.githubusercontent.com/54917b2d05b778af3e9744911a69da7975c8bcca6b9d85899b0278212d501594/68747470733a2f2f696d672e736869656c64732e696f2f6e706d2f762f707269736d612e7376673f7374796c653d666c6174)](https://www.npmjs.com/package/prisma) [![img](https://camo.githubusercontent.com/b0ad703a46e8b249ef2a969ab95b2cb361a2866ecb8fe18495a2229f5847102d/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f5052732d77656c636f6d652d627269676874677265656e2e737667)](https://github.com/prisma/prisma/blob/main/CONTRIBUTING.md) [![img](https://camo.githubusercontent.com/761c9e6f999fd87e8236882cdd659c01ab17d9d4bf14c0a79b59fc3c23dffae4/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6c6963656e73652d417061636865253230322d626c7565)](https://github.com/prisma/prisma/blob/main/LICENSE) [![img](https://camo.githubusercontent.com/2b96c3a47f52378c12fe2435bfbc1d9bb08a1abf0a9d9ba1bbfc57f9f4bf2ef8/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f636861742d6f6e253230736c61636b2d626c75652e737667)](https://slack.prisma.io/)

## [å¿«é€Ÿå…¥é—¨](https://www.prisma.io/docs/getting-started/quickstart)  â€¢  [ç½‘ç«™](https://www.prisma.io/)  â€¢  [æ–‡æ¡£](https://www.prisma.io/docs/)  â€¢  [ç¤ºä¾‹](https://github.com/prisma/prisma-examples/)  â€¢  [åšå®¢](https://www.prisma.io/blog)  â€¢  [Slack ](https://slack.prisma.io/) â€¢  [Twitter ](https://twitter.com/prisma) â€¢  [Prisma 1](https://github.com/prisma/prisma1)

## ä»€ä¹ˆæ˜¯Prismaï¼Ÿ

Prisma æ˜¯ç”±ä»¥ä¸‹å·¥å…·ç»„æˆçš„ **ä¸‹ä¸€ä»£ ORM** ï¼š

- [**Prisma Client**](https://www.prisma.io/docs/concepts/components/prisma-client)ï¼šç”¨äº Node.js å’Œ TypeScript çš„è‡ªåŠ¨ç”Ÿæˆå’Œç±»å‹å®‰å…¨çš„æŸ¥è¯¢æ„å»ºå™¨
- [**Prisma Migrate**](https://www.prisma.io/docs/concepts/components/prisma-migrate)ï¼šå£°æ˜æ€§æ•°æ®å»ºæ¨¡å’Œè¿ç§»ç³»ç»Ÿ
- [**Prisma Studio**](https://github.com/prisma/studio) : ç”¨äºæŸ¥çœ‹å’Œç¼–è¾‘æ•°æ®åº“ä¸­æ•°æ®çš„ GUI

Prisma Client å¯ç”¨äº*ä»»ä½•*Node.js æˆ– TypeScript åç«¯åº”ç”¨ç¨‹åºï¼ˆåŒ…æ‹¬æ— æœåŠ¡å™¨åº”ç”¨ç¨‹åºå’Œå¾®æœåŠ¡ï¼‰ã€‚è¿™å¯ä»¥æ˜¯[REST API](https://www.prisma.io/docs/understand-prisma/prisma-in-your-stack/rest)ã€[GraphQL API](https://www.prisma.io/docs/understand-prisma/prisma-in-your-stack/graphql)ã€gRPC API æˆ–ä»»ä½•å…¶ä»–éœ€è¦æ•°æ®åº“çš„ä¸œè¥¿ã€‚

> **æ‚¨åœ¨å¯»æ‰¾ Prisma 1 å—ï¼ŸPrisma 1 å­˜å‚¨åº“å·²é‡å‘½åä¸º[`prisma/prisma1`](https://github.com/prisma/prisma1)** .

## å…¥é—¨

å¼€å§‹ä½¿ç”¨ Prisma çš„æœ€å¿«æ–¹æ³•æ˜¯éµå¾ª[**å¿«é€Ÿå…¥é—¨ï¼ˆ5 åˆ†é’Ÿï¼‰**](https://www.prisma.io/docs/getting-started/quickstart-typescript)ã€‚

å¿«é€Ÿå…¥é—¨åŸºäºé¢„é…ç½®çš„ SQLite æ•°æ®åº“ã€‚æ‚¨è¿˜å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æŒ‡å—ä¹‹ä¸€å¼€å§‹ä½¿ç”¨è‡ªå·±çš„æ•°æ®åº“ï¼ˆPostgreSQL å’Œ MySQLï¼‰ï¼š

- [å°† Prisma æ·»åŠ åˆ°ç°æœ‰é¡¹ç›®](https://www.prisma.io/docs/getting-started/setup-prisma/add-to-existing-project-typescript-postgres)
- [ä»å¤´å¼€å§‹ä½¿ç”¨ Prisma å»ºç«‹ä¸€ä¸ªæ–°é¡¹ç›®](https://www.prisma.io/docs/getting-started/setup-prisma/start-from-scratch-typescript-postgres)

## Prismaå¦‚ä½•å·¥ä½œ

æœ¬èŠ‚å¯¹ Prisma çš„å·¥ä½œåŸç†åŠå…¶æœ€é‡è¦çš„æŠ€æœ¯ç»„ä»¶è¿›è¡Œäº†é«˜çº§æ¦‚è¿°ã€‚å¦‚éœ€æ›´å…¨é¢çš„ä»‹ç»ï¼Œè¯·è®¿é—®[Prisma æ–‡æ¡£](https://www.prisma.io/docs/)ã€‚

### Prisma æ¶æ„

æ¯ä¸ªä½¿ç”¨ Prisma å·¥å…·åŒ…ä¸­çš„å·¥å…·çš„é¡¹ç›®éƒ½ä»ä¸€ä¸ª[Prisma æ¨¡å¼æ–‡ä»¶](https://www.prisma.io/docs/concepts/components/prisma-schema)å¼€å§‹ã€‚Prisma æ¨¡å¼å…è®¸å¼€å‘äººå‘˜ä»¥ç›´è§‚çš„æ•°æ®å»ºæ¨¡è¯­è¨€å®šä¹‰ä»–ä»¬çš„ *åº”ç”¨ç¨‹åºæ¨¡å‹ã€‚* å®ƒè¿˜åŒ…å«ä¸æ•°æ®åº“çš„è¿æ¥å¹¶å®šä¹‰äº†ä¸€ä¸ª *ç”Ÿæˆå™¨* ï¼š

```
// Data source
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Generator
generator client {
  provider = "prisma-client-js"
}

// Data model
model Post {
  id        Int     @id @default(autoincrement())
  title     String
  content   String?
  published Boolean @default(false)
  author    User?   @relation(fields:  [authorId], references: [id])
  authorId  Int?
}

model User {
  id    Int     @id @default(autoincrement())
  email String  @unique
  name  String?
  posts Post[]
}
```

åœ¨æ­¤æ¶æ„ä¸­ï¼Œæ‚¨éœ€è¦é…ç½®ä¸‰ä»¶äº‹ï¼š

- **æ•°æ®æº** ï¼šæŒ‡å®šæ‚¨çš„æ•°æ®åº“è¿æ¥ï¼ˆé€šè¿‡ç¯å¢ƒå˜é‡ï¼‰
- **Generator** ï¼šè¡¨ç¤ºè¦ç”Ÿæˆ Prisma Client
- **æ•°æ®æ¨¡å‹** ï¼šå®šä¹‰æ‚¨çš„åº”ç”¨ç¨‹åºæ¨¡å‹

------

### Prisma æ•°æ®æ¨¡å‹

åœ¨æ­¤é¡µé¢ä¸Šï¼Œé‡ç‚¹æ˜¯æ•°æ®æ¨¡å‹ã€‚æ‚¨å¯ä»¥åœ¨ç›¸åº”çš„æ–‡æ¡£é¡µé¢ä¸Šäº†è§£æœ‰å…³[æ•°æ®æº](https://www.prisma.io/docs/reference/tools-and-interfaces/prisma-schema/data-sources)å’Œ[ç”Ÿæˆå™¨çš„æ›´å¤šä¿¡æ¯ã€‚](https://www.prisma.io/docs/reference/tools-and-interfaces/prisma-schema/generators)

#### Prisma æ¨¡å‹çš„åŠŸèƒ½

æ•°æ®æ¨¡å‹æ˜¯æ¨¡å‹çš„[é›†åˆ](https://www.prisma.io/docs/concepts/components/prisma-schema/data-model#defining-models)ã€‚æ¨¡å‹æœ‰ä¸¤ä¸ªä¸»è¦åŠŸèƒ½ï¼š

- è¡¨ç¤ºåº•å±‚æ•°æ®åº“ä¸­çš„è¡¨
- ä¸º Prisma Client API ä¸­çš„æŸ¥è¯¢æä¾›åŸºç¡€

#### è·å–æ•°æ®æ¨¡å‹

å°†æ•°æ®æ¨¡å‹â€œè·å–â€åˆ° Prisma æ¨¡å¼ä¸­æœ‰ä¸¤ä¸ªä¸»è¦å·¥ä½œæµç¨‹ï¼š

- [é€šè¿‡è‡ªçœ](https://www.prisma.io/docs/concepts/components/introspection)æ•°æ®åº“ç”Ÿæˆæ•°æ®æ¨¡å‹
- ä½¿ç”¨Prisma Migrateæ‰‹åŠ¨ç¼–å†™æ•°æ®æ¨¡å‹å¹¶å°†å…¶æ˜ å°„åˆ°æ•°æ®åº“

ä¸€æ—¦å®šä¹‰äº†æ•°æ®æ¨¡å‹ï¼Œæ‚¨å°±å¯ä»¥[ç”Ÿæˆ Prisma å®¢æˆ·ç«¯](https://www.prisma.io/docs/concepts/components/prisma-client/generating-prisma-client)ï¼Œå®ƒå°†å…¬å¼€ CRUD å’Œå¯¹å·²å®šä¹‰æ¨¡å‹çš„æ›´å¤šæŸ¥è¯¢ã€‚å¦‚æœæ‚¨ä½¿ç”¨ TypeScriptï¼Œæ‚¨å°†è·å¾—æ‰€æœ‰æŸ¥è¯¢çš„å®Œæ•´ç±»å‹å®‰å…¨æ€§ï¼ˆå³ä½¿ä»…æ£€ç´¢æ¨¡å‹å­—æ®µçš„å­é›†ï¼‰ã€‚

------

### ä½¿ç”¨ Prisma Client è®¿é—®æ‚¨çš„æ•°æ®åº“

#### ç”Ÿæˆ Prisma å®¢æˆ·ç«¯

ä½¿ç”¨ Prisma Client çš„ç¬¬ä¸€æ­¥æ˜¯å®‰è£…å®ƒçš„ npm åŒ…ï¼š

```
npm install @prisma/client
```

è¯·æ³¨æ„ï¼Œæ­¤è½¯ä»¶åŒ…çš„å®‰è£…ä¼šè°ƒç”¨ `prisma generate`è¯»å–æ‚¨çš„ Prisma æ¶æ„å¹¶*ç”Ÿæˆ*Prisma å®¢æˆ·ç«¯ä»£ç çš„å‘½ä»¤ã€‚ä»£ç å°†ä½äº `node_modules/.prisma/client`ï¼Œç”± å¯¼å‡º `node_modules/@prisma/client/index.d.ts`ã€‚

æ›´æ”¹æ•°æ®æ¨¡å‹åï¼Œæ‚¨éœ€è¦æ‰‹åŠ¨é‡æ–°ç”Ÿæˆ Prisma Client ä»¥ç¡®ä¿å†…éƒ¨ä»£ç  `node_modules/.prisma/client`å¾—åˆ°æ›´æ–°ï¼š

```
prisma generate
```

æœ‰å…³[â€œç”Ÿæˆ Prisma å®¢æˆ·ç«¯â€](https://www.prisma.io/docs/concepts/components/prisma-client/generating-prisma-client)çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…æ–‡æ¡£ã€‚

#### ä½¿ç”¨ Prisma Client å‘æ‚¨çš„æ•°æ®åº“å‘é€æŸ¥è¯¢

ç”Ÿæˆ Prisma Client åï¼Œæ‚¨å¯ä»¥å°†å…¶å¯¼å…¥ä»£ç å¹¶å°†æŸ¥è¯¢å‘é€åˆ°æ‚¨çš„æ•°æ®åº“ã€‚è¿™å°±æ˜¯è®¾ç½®ä»£ç çš„æ ·å­ã€‚

##### å¯¼å…¥å¹¶å®ä¾‹åŒ– Prisma å®¢æˆ·ç«¯

æ‚¨å¯ä»¥æŒ‰å¦‚ä¸‹æ–¹å¼å¯¼å…¥å’Œå®ä¾‹åŒ– Prisma Clientï¼š

```ts
import { PrismaClient } from '@prisma/client'

const prisma = new PrismaClient()
```

æˆ–è€…

```js
const { PrismaClient } = require('@prisma/client')

const prisma = new PrismaClient()
```

ç°åœ¨æ‚¨å¯ä»¥å¼€å§‹é€šè¿‡ç”Ÿæˆçš„ Prisma Client API å‘é€æŸ¥è¯¢ï¼Œè¿™é‡Œæœ‰å‡ ä¸ªç¤ºä¾‹æŸ¥è¯¢ã€‚è¯·æ³¨æ„ï¼Œæ‰€æœ‰ Prisma Client æŸ¥è¯¢éƒ½è¿”å› *æ™®é€šçš„æ—§ JavaScript å¯¹è±¡* ã€‚

[åœ¨Prisma Client æ–‡æ¡£](https://www.prisma.io/docs/concepts/components/prisma-client)ä¸­äº†è§£æœ‰å…³å¯ç”¨æ“ä½œçš„æ›´å¤šä¿¡æ¯æˆ–è§‚çœ‹æ­¤[æ¼”ç¤ºè§†é¢‘](https://www.youtube.com/watch?v=LggrE5kJ75I&list=PLn2e1F9Rfr6k9PnR_figWOcSHgc_erDr5&index=4)ï¼ˆ2 åˆ†é’Ÿï¼‰ã€‚

##### `User`ä»æ•°æ®åº“ä¸­æ£€ç´¢æ‰€æœ‰è®°å½•

```ts
// Run inside `async` function
const allUsers = await prisma.user.findMany()
```

##### åŒ…æ‹¬ `posts`æ¯ä¸ªè¿”å› `User`å¯¹è±¡çš„å…³ç³»

```ts
// Run inside `async` function
const allUsers = await prisma.user.findMany({
  include: { posts: true },
})
```

##### è¿‡æ»¤æ‰€æœ‰ `Post`åŒ…å« `"prisma"`

```ts
// Run inside `async` function
const filteredPosts = await prisma.post.findMany({
  where: {
    OR: [{ title: { contains: 'prisma' } }, { content: { contains: 'prisma' } }],
  },
})
```

##### åœ¨åŒä¸€æŸ¥è¯¢ä¸­åˆ›å»ºæ–°è®°å½• `User`å’Œæ–°è®°å½• `Post`

```ts
// Run inside `async` function
const user = await prisma.user.create({
  data: {
    name: 'Alice',
    email: 'alice@prisma.io',
    posts: {
      create: { title: 'Join us for Prisma Day 2021' },
    },
  },
})
```

##### æ›´æ–°ç°æœ‰ `Post`è®°å½•

```ts
// Run inside `async` function
const post = await prisma.post.update({
  where: { id: 42 },
  data: { published: true },
})
```

#### ä¸ TypeScript ä¸€èµ·ä½¿ç”¨

è¯·æ³¨æ„ï¼Œåœ¨ä½¿ç”¨ TypeScript æ—¶ï¼Œæ­¤æŸ¥è¯¢çš„ç»“æœå°†æ˜¯*é™æ€ç±»å‹*çš„ï¼Œå› æ­¤æ‚¨ä¸ä¼šæ„å¤–è®¿é—®ä¸å­˜åœ¨çš„å±æ€§ï¼ˆå¹¶ä¸”åœ¨ç¼–è¯‘æ—¶ä¼šæ•è·ä»»ä½•æ‹¼å†™é”™è¯¯ï¼‰ã€‚åœ¨æ–‡æ¡£ä¸­çš„ç”Ÿæˆç±»å‹çš„[é«˜çº§ç”¨æ³•](https://www.prisma.io/docs/concepts/components/prisma-client/advanced-usage-of-generated-types)é¡µé¢ä¸Šäº†è§£æœ‰å…³åˆ©ç”¨ Prisma å®¢æˆ·ç«¯ç”Ÿæˆç±»å‹çš„æ›´å¤šä¿¡æ¯ã€‚

## ç¤¾åŒº

Prisma æ‹¥æœ‰ä¸€ä¸ªç”±çƒ­æƒ…çš„åº”ç”¨ç¨‹åºå¼€å‘äººå‘˜ç»„æˆçš„åºå¤§ä¸”æ”¯æŒæ€§çš„[ç¤¾åŒº](https://www.prisma.io/community)ã€‚[æ‚¨å¯ä»¥åœ¨Slack](https://slack.prisma.io/)å’Œ[GitHub ä¸Š](https://github.com/prisma/prisma/discussions)åŠ å…¥æˆ‘ä»¬ã€‚

## å®‰å…¨

å¦‚æœæ‚¨æœ‰å®‰å…¨é—®é¢˜éœ€è¦æŠ¥å‘Šï¼Œè¯·é€šè¿‡[security@prisma.io](mailto:security@prisma.io?subject=[GitHub] Prisma 2 Security Report )ä¸æˆ‘ä»¬è”ç³»ã€‚

## æ”¯æŒ

### è¯¢é—®æœ‰å…³ Prisma çš„é—®é¢˜

æ‚¨å¯ä»¥åœ¨ GitHub ä¸Šçš„å­˜å‚¨åº“ä¸­æå‡ºé—®é¢˜å¹¶å‘èµ·æœ‰å…³ Prisma ç›¸å…³ä¸»é¢˜çš„[è®¨è®ºã€‚](https://github.com/prisma/prisma/discussions/)`prisma`

ğŸ‘‰ [**é—®ä¸€ä¸ªé—®é¢˜**](https://github.com/prisma/prisma/discussions/new)

### ä¸º Prisma åˆ›å»ºé”™è¯¯æŠ¥å‘Š

å¦‚æœæ‚¨çœ‹åˆ°é”™è¯¯æ¶ˆæ¯æˆ–é‡åˆ°é—®é¢˜ï¼Œè¯·åŠ¡å¿…åˆ›å»ºé”™è¯¯æŠ¥å‘Šï¼æ‚¨å¯ä»¥åœ¨æ–‡æ¡£ä¸­æ‰¾åˆ°[åˆ›å»ºé”™è¯¯æŠ¥å‘Šçš„æœ€ä½³å®è·µ](https://www.prisma.io/docs/support/creating-bug-reports)ï¼ˆä¾‹å¦‚åŒ…æ‹¬é¢å¤–çš„è°ƒè¯•è¾“å‡ºï¼‰ã€‚

ğŸ‘‰ [**åˆ›å»ºé”™è¯¯æŠ¥å‘Š**](https://github.com/prisma/prisma/issues/new?assignees=&labels=&template=bug_report.md&title=)

### æäº¤åŠŸèƒ½è¯·æ±‚

å¦‚æœ Prisma å½“å‰æ²¡æœ‰æŸä¸ªåŠŸèƒ½ï¼Œè¯·åŠ¡å¿…æŸ¥çœ‹[è·¯çº¿å›¾](https://www.prisma.io/docs/more/roadmap)ï¼Œçœ‹çœ‹æ˜¯å¦å·²ç»ä¸ºæœªæ¥è®¡åˆ’äº†è¿™ä¸€ç‚¹ã€‚

å¦‚æœè·¯çº¿å›¾ä¸Šçš„åŠŸèƒ½ä¸ GitHub é—®é¢˜ç›¸å…³è”ï¼Œè¯·ç¡®ä¿åœ¨è¯¥é—®é¢˜ä¸Šç•™ä¸‹ +1ï¼Œæœ€å¥½æ˜¯è¯„è®ºæ‚¨å¯¹è¯¥åŠŸèƒ½çš„çœ‹æ³•ï¼

ğŸ‘‰ [**æäº¤åŠŸèƒ½è¯·æ±‚**](https://github.com/prisma/prisma/issues/new?assignees=&labels=&template=feature_request.md&title=)

## è´¡çŒ®

è¯·å‚é˜…æˆ‘ä»¬çš„[è´¡çŒ®æŒ‡å—](https://github.com/prisma/prisma/blob/main/CONTRIBUTING.md)å’Œ[è´¡çŒ®è€…è¡Œä¸ºå‡†åˆ™](https://github.com/prisma/prisma/blob/main/CODE_OF_CONDUCT.md)ã€‚