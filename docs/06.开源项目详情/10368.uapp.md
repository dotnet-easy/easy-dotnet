---
title: uapp
date: 2023-04-21 15:10:30
permalink: /pages/10368/
sidebar: false
article: false
---
::: note å¼€æºåœ°å€
Githubï¼š[https://gitee.com/uappkit/uapp](https://gitee.com/uappkit/uapp)
::: 
## äº†è§£ uapp

uappæ˜¯è§£å†³uniappå¼€å‘ç—›ç‚¹å¹¶æå‡å…¶å¼€å‘æ•ˆç‡çš„å‘½ä»¤è¡Œå·¥å…·ã€‚ç±»ä¼¼äºcordova, ionic, expoçš„ä½œç”¨ã€‚uappè¿˜åŒ…å« uapp-android, uapp-ios ä¸¤ä¸ªå¹³å°çš„æ¨¡æ¿ä»£ç ã€‚

å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¾ˆå¤šç¹ççš„æ“ä½œç”¨ `uapp`éƒ½æ˜¯ä¸€æ­¥æå®š:

- å¼€èµ·ä¸€ä¸ªæ–°é¡¹ç›®ï¼Œé€šå¸¸è¦ä¿®æ”¹å·¥ç¨‹é‡Œçš„å¾ˆå¤šå‚æ•°ï¼Œæ¯”å¦‚appçš„åç§°ï¼Œç‰ˆæœ¬å·, dcloud_key, å¾®ä¿¡ç›¸å…³çš„ appkey ç­‰ï¼Œäººå·¥ä¸ä»…ç¹çï¼Œè¿˜å®¹æ˜“å‡ºé”™ï¼Œä½¿ç”¨ `uapp manifest sync` ä¸€æ­¥æå®šã€‚
- APPå‘å¸ƒå’Œå¼€å‘è°ƒè¯•æ—¶çš„é…ç½®ä¸å®Œå…¨ç›¸åŒï¼Œæ¯”å¦‚ä½ ä¸èƒ½æŠŠ debug-server-release.aar è¿™ç§è°ƒè¯•ç›¸å…³çš„åº“å‘å¸ƒï¼Œé‚£å°±éœ€è¦æŠŠå‘å¸ƒå’Œå¼€å‘çš„é…ç½®éš”ç¦»å¼€ï¼Œuappå·²ç»å¸®ä½ åšå¥½éš”ç¦»é…ç½®ï¼Œå¹¶ä¸”å¾ˆæ–¹ä¾¿é€šè¿‡jenkinså®ç°å‘å¸ƒæµç¨‹çš„è‡ªåŠ¨åŒ–é›†æˆï¼Œå³ä½¿ä¸éœ€è¦ä¹Ÿå¥½è¿‡æ‰‹åŠ¨æ”¹æ¥æ”¹å»ï¼ŒæŠŠè‡ªå·±éƒ½æ”¹æ™•äº†ã€‚
- è‡ªå·±ç¼–è¯‘ä¸ªè°ƒè¯•åŸºåº§ï¼Œè¿˜éœ€è¦æ‰‹åŠ¨ COPY åˆ° HBuilderX ä¸‹ï¼Ÿç”¨ `uapp publish debug` è‡ªåŠ¨ç¼–è¯‘ä¸€æ­¥æå®šã€‚
- HBuilderX ç¼–è¯‘å¥½çš„æœ¬åœ°APPèµ„æºï¼Œè¿˜éœ€è¦æ‰‹åŠ¨ COPY åˆ°å·¥ç¨‹é‡Œ? ç”¨ `uapp prepare` ä¸€æ­¥æå®šã€‚
- å¾®ä¿¡å¼€å‘è€…å¹³å°ï¼Œ[DCloud å¼€å‘è€…ä¸­å¿ƒ](http://dev.dcloud.net.cn) éƒ½éœ€è¦çš„ç­¾åä¿¡æ¯æ€ä¹ˆæŸ¥çœ‹ï¼Œ`uapp info` ä¸€æ­¥æå®šã€‚
- uniapp-cli åˆ›å»ºæ–°å·¥ç¨‹çš„å‘½ä»¤æ˜¯å•¥äº†çš„ï¼Œæ²¡è®°ä½ï¼Œ`uapp new xxx` ä¸€æ­¥æå®šã€‚

**uniapp ç”¨ä¸€å¥—ä»£ç ï¼Œè¿è¡Œåˆ°å¤šä¸ªå¹³å°**

![img](https://vkceyugu.cdn.bspapp.com/VKCEYUGU-a90b5f95-90ba-4d30-a6a7-cd4d057327db/ec6e95dd-77ad-4d14-aafa-ca503f5b9e53.jpg)

uniappæ˜¯ä¸€ä¸ªåŸºäºVueåŒæ„æŠ€æœ¯çš„å¤šå¹³å°å‰ç«¯æ¡†æ¶ï¼Œå¯¹å…¬å¸æˆ–åˆ›ä¸šè€…æ¥è¯´ï¼Œåªéœ€è¦æœ‰ä¸€ä¸ªä¼šVueçš„å‰ç«¯ï¼Œå°±å¯ä»¥åŒæ—¶å†™App(android/ios) ï¼ŒH5ï¼Œå¿«åº”ç”¨ï¼Œå¾®ä¿¡/QQ/æŠ–éŸ³/é£ä¹¦/ç™¾åº¦/æ”¯ä»˜å®ç­‰å„å®¶å°ç¨‹åºï¼Œç»´æŠ¤ä¸€å¥—ä»£ç å¯ä»¥å‘å¸ƒ10å¤šä¸ªå¹³å°ã€‚æœ‰ä»¥ä¸‹å‡ å¤§å¥½å¤„ï¼š

- å‘å¸ƒå¤šä¸ªå¹³å°è·å–æ›´å¤šæµé‡
- ä¸€æ—¦ç†Ÿæ‚‰ï¼Œå¼€å‘æ•ˆç‡æé«˜
- è‡³å°‘çœ 1 / 3 ç ”å‘æˆæœ¬ï¼Œå•†ä¸šè¯•é”™æˆæœ¬æ›´ä½
- å³ä½¿å½“å‰ä¸éœ€è¦å‘å¸ƒå¤šå¹³å°ï¼ŒåŒæ ·èŠ±æ—¶é—´å†™ä»£ç ï¼Œä¸ºä»€ä¹ˆä¸é€‰æ‹©å¤ç”¨ä»·å€¼æ›´é«˜çš„æ–¹æ³•å‘¢

ä½† uniapp å®˜æ–¹å‘å¸ƒçš„ç¦»çº¿åŒ…é‡Œåªæœ‰ DEMOï¼Œå¯¹äºä¸€ä¸ªæ–°çš„é¡¹ç›®ï¼Œéœ€è¦æ‰‹åŠ¨æ›´æ”¹çš„é…ç½®è¾ƒå¤šï¼Œä¸”è°ƒè¯•åŸºåº§å’Œæ­£å¼å‘ç‰ˆå…±ç”¨ä¸€ä¸ªé…ç½®ï¼Œç»´æŠ¤èµ·æ¥ä¹Ÿå¾ˆä¸æ–¹ä¾¿ã€‚uapp å°±æ˜¯æˆ‘ä»¬åœ¨å®è·µäº†ä¸€äº›äº§å“åï¼Œç§¯ç´¯çš„ä¸€äº›ç»éªŒï¼Œåˆ†ç¦»äº†è°ƒè¯•å’Œå‘å¸ƒçš„é…ç½®ï¼Œä¹Ÿæ–¹ä¾¿é€šè¿‡å‘½ä»¤åŠ å…¥è‡ªåŠ¨åŒ–é›†æˆã€‚

**ä¸ºä»€ä¹ˆä¸ä½¿ç”¨åœ¨çº¿æ‰“åŒ…å‘¢?**

uniapp åœ¨çº¿æ‰“åŒ…ï¼Œä¸€èˆ¬æ— æ³•æ»¡è¶³çµæ´»çš„éœ€æ±‚ï¼Œæ¯”å¦‚ï¼š

- æ²¡æ³•åœ¨å›¢é˜Ÿé‡Œå®æ–½è‡ªåŠ¨åŒ–é›†æˆï¼ˆè‡ªåŠ¨æ„å»ºã€å•å…ƒæµ‹è¯•ã€å‘å¸ƒï¼‰ã€‚
- æœ‰äº›åŒ…æ˜¯å†—ä½™çš„ï¼Œåœ¨çº¿æ‰“åŒ…ä¸èƒ½æ§åˆ¶å…·ä½“æ‰“å…¥å“ªäº›åŒ…ã€‚
- åœ¨çº¿æ‰“åŒ…æœ‰å¤§å°é™åˆ¶ï¼Œè¶…è¿‡éœ€è¦å•ç‹¬ä»˜è´¹ï¼Œå› ä¸ºç‰¹åˆ«å ç”¨å®˜æ–¹æœåŠ¡å™¨èµ„æºã€‚
- å†™uniappæ’ä»¶æ‰©å±•æ—¶ï¼Œå¿…é¡»æœ‰ç¦»çº¿å·¥ç¨‹æ‰æ–¹ä¾¿è°ƒè¯•ï¼Œä¸”å¯ä»¥è‡ªå·±æ§åˆ¶æ˜¯å¦å‘å¸ƒæ’ä»¶ã€‚æˆ‘ä»¬ä¹Ÿæ˜¯åœ¨å†™ ffmpeg æ‰©å±•æ—¶ï¼Œé‡åˆ°äº›è®¸ä¸ä¾¿ã€‚

## å…ˆå®‰è£… uappsdk

1ã€ å®‰è£… uapp å‘½ä»¤

```
npm install -g uapp

# åˆå§‹åŒ–æˆ–æ›´æ–° uappsdk
uapp sdk init
```

2ã€ä¸‹è½½ uniapp ç¦»çº¿æ‰“åŒ…çš„ SDK

> æ³¨æ„å’Œ.uappsdkåŒºåˆ†å¼€ï¼Œæ­¤å¤„çš„uniappç¦»çº¿åŒ…çš„SDKæ˜¯æŒ‡dcloud å®˜æ–¹å‘å¸ƒçš„

**android ç¦»çº¿æ‰“åŒ…SDK:**

[https://nativesupport.dcloud.net.cn/AppDocs/download/android](https://nativesupport.dcloud.net.cn/AppDocs/download/android)

**ios ç¦»çº¿æ‰“åŒ…SDK:**

[https://nativesupport.dcloud.net.cn/AppDocs/download/ios](https://nativesupport.dcloud.net.cn/AppDocs/download/ios)

è§£å‹å…¶ä¸­çš„SDKç›®å½•ï¼Œæ”¾å…¥ .uappsdk æ–‡ä»¶å¤¹é‡Œï¼Œæœ€ç»ˆ .uappsdk æ–‡ä»¶å¤¹ç»“æ„å¦‚ä¸‹:

```
> $HOME/.uappsdk/
.
â”œâ”€â”€ android
â”‚   â”œâ”€â”€ SDK # -> è¿™é‡Œæ˜¯Androidçš„SDK
â”‚   â””â”€â”€ libs
â”œâ”€â”€ ios
â”‚   â”œâ”€â”€ SDK # -> è¿™é‡Œæ˜¯iOSçš„SDK
â””â”€â”€ templates
    â””â”€â”€ manifest.json
```

> SDK ç›¸å…³æ–‡ä»¶éƒ½æ”¾åœ¨å½“å‰ç”¨æˆ·çš„ $HOME/.uappsdk ç›®å½•ä¸‹ã€‚

éœ€è¦å¼•å…¥å“ªäº›æ¨¡æ¿ï¼Œè¯·åŠ¡å¿…ä»”ç»†é˜…è¯»å®˜æ–¹çš„ SDK æ¨¡å—ä¾èµ–è¯´æ˜ï¼ŒåŒ…å«å¤šäº†ä¼šå½±å“APPå®¡æ ¸ï¼Œå°‘äº†ä¼šå½±å“åŠŸèƒ½ä½¿ç”¨ã€‚

.uappsdk ç›®å½•ä¸‹é»˜è®¤åŒ…å«çš„ç¬¬ä¸‰æ–¹ä¾èµ–åŒ…ï¼Œä»…å«æœ‰å¾®ä¿¡æˆæƒç™»å½•ï¼Œè‹¹æœæˆæƒç™»å½•ï¼ŒåŸºç¡€åŠŸèƒ½ç­‰ã€‚ä¸åŒ…å«å¹¿å‘Šã€é€šçŸ¥ç­‰ç›¸å…³ä¾èµ–ï¼Œå› ä¸ºå¹¿å‘Šå’Œé€šçŸ¥ç±»çš„sdkï¼Œåœ¨å®¡æ ¸æ—¶éœ€è¦ç‰¹åˆ«æäº¤æ•°æ®è·Ÿè¸ªè¯´æ˜ï¼Œæ¯”è¾ƒéº»çƒ¦ã€‚

å¦‚ä¸æ˜¯å¿…é¡»ï¼Œæœ€å¥½ä¸åŒ…å«ã€‚å¦‚æœç¡®å®éœ€è¦ï¼Œå¯ä»¥è‡ªè¡Œæ‰‹åŠ¨æ·»åŠ ï¼Œå‚ç…§å¦‚ä¸‹æ¨¡å—ä¾èµ–è¯´æ˜ã€‚

**android æ¨¡å—ä¾èµ–è¯´æ˜:**

é’ˆå¯¹ androidï¼Œä»…éœ€æå–å¿…ç”¨çš„ä¾èµ–åŒ…æ”¾å…¥ $HOME/.uappsdk/android/libs é‡Œã€‚ [https://nativesupport.dcloud.net.cn/AppDocs/usemodule/androidModuleConfig/android_Library](https://nativesupport.dcloud.net.cn/AppDocs/usemodule/androidModuleConfig/android_Library)

**ios æ¨¡å—ä¾èµ–è¯´æ˜:**

[https://nativesupport.dcloud.net.cn/AppDocs/usemodule/iOSModuleConfig/common](https://nativesupport.dcloud.net.cn/AppDocs/usemodule/iOSModuleConfig/common)

## ä¸‹è½½ç¦»çº¿æ‰“åŒ…å·¥ç¨‹æºç 

### 1. ä¸‹è½½ Android ç¦»çº¿å·¥ç¨‹æºç 

è§ [doc/uapp-android.md](doc/uapp-android.md)

### 2. ä¸‹è½½ iOS ç¦»çº¿å·¥ç¨‹æºç 

è§ [doc/uapp-ios.md](doc/uapp-ios.md)

iOS çš„å·¥ç¨‹åŒ–ä¸€ç›´éƒ½ä¸å¤ªæ–¹ä¾¿ï¼Œé€šå¸¸éƒ½æ˜¯ç”¨çš„ CocoaPodsï¼Œä½†ä¸é€‚åˆ DCloudç¦»çº¿SDK çš„å‘å¸ƒå½¢å¼ã€‚ç»è¿‡æˆ‘ä»¬åœ¨äº§å“ä¸­çš„ä¸æ–­å®è·µï¼Œæœ€ç»ˆé€‰æ‹©äº† XCodeGenã€‚

### 3. å·¥ç¨‹ä¸‹å¸¸è§å‘½ä»¤

```
# è¯»å– manifest ä¸­çš„é…ç½®ï¼Œå¹¶æ›´æ–°åŸºæœ¬ä¿¡æ¯
uapp manifest info
uapp manifest sync ${webapp}/src/manifest.json

# æ›´æ–° HBuilderX æœ¬åœ°æ‰“åŒ…èµ„æº
# å¦‚æœé€šè¿‡ HBuilderX é‡æ–°ç¼–è¯‘ï¼Œæˆ–è€…é€šè¿‡ uniapp-cli å‘½ä»¤é‡æ–°ç¼–è¯‘çš„èµ„æºï¼Œå¯ä»¥é€šè¿‡ prepare å‘½ä»¤æ›´æ–°åˆ°ç¦»çº¿ APP å·¥ç¨‹ä¸­ï¼Œç”¨äº APP é‡æ–°æ‰“åŒ…å‘å¸ƒã€‚
uapp prepare

# ç¼–è¯‘å¹¶å‘å¸ƒè‡ªå®šä¹‰åŸºåº§åˆ° HBuilderX ä¸‹
uapp publish debug
```

## manifest.json ç›¸å…³é…ç½®

> æ³¨æ„: `uapp.* å‚æ•°` æ˜¯ uapp æ ¹æ®éœ€è¦æ‰©å±•å‡ºæ¥çš„, é dcloud å®˜æ–¹æ ‡å‡†.

åŸå·¥ç¨‹é‡Œçš„ `manifest.json` å†…çš„å‚æ•°ï¼Œå¤§å¤šæ˜¯ç»™ hbuiderx åœ¨çº¿äº‘æ‰“åŒ…ç”¨çš„ã€‚ç¼–è¯‘åç”Ÿæˆçš„ç»ˆæå‘å¸ƒåŒ…ï¼Œé‡Œé¢çš„ manifest.json å·²è¢«å»é™¤äº†æ— å…³æ•°æ®ï¼Œæ‰€ä»¥ä¸ç”¨æ‹…å¿ƒå‚æ•°æš´éœ²é—®é¢˜ã€‚

```
{
  "name": "uapp",
  "appid": "__UNI__ECA8F4D",
  "versionName": "1.0.1",
  "versionCode": "1000000",
  "uapp": {
    "name": "Î¼AppKit",
    "package": "com.code0xff.uapp",
    "android.appkey": "b4ab7d1c668cbb3b257aeeabd75c29da",
    "ios.appkey": "aa215ff1522abe39cb7ccec5943eeb92",
    "prepare.dir": "${SRC}/../dist/build/app",
    "prepare.before": "cd ${SRC}/../ && npm run build:app",
    "prepare.after": "uapp publish debug"
  },
  "app-plus": {
    "distribute": {
      "sdkConfigs": {
        "oauth": {
          "weixin": {
            "appid": "wx95039516c9f72e50",
            "appsecret": "123456",
            "UniversalLinks": "https://uapp.code0xff.com/"
          }
        }
      }
    }
  }
}
```

### ğŸ”¥ uapp.* å‚æ•°è¯´æ˜

ğŸ‘‰ ä¸åŒå¹³å°å¯ä»¥ç”¨å‰ç¼€åŒºåˆ†

> name, package, versionName, versionCode å¦‚æœéœ€è¦å¹³å°å·®å¼‚åŒ–å®šä¹‰, å¯ä»¥åŠ å‰ç¼€ android.xxx, ios.xxx
>
> ä¾‹å¦‚ android.name, android.package, ios.package, ios.versionCode ...
>
> prepare.* å‚æ•°å†…ï¼Œå¯ä»¥ä½¿ç”¨ `${SRC}, ${SRC}` ä¸ºå½“å‰ manifest.json çš„åŒçº§ç›®å½•ï¼Œæ”¯æŒåŠ  ../å®šä½ä¸Šä¸€çº§ç›®å½•ï¼Œé¿å…ç”¨ç»å¯¹è·¯å¾„ã€‚

ğŸ‘‡ğŸ‘‡ ğŸ‘‡

| uapp.* å‚æ•°    | è¯´æ˜                                                         |
| -------------- | ------------------------------------------------------------ |
| name           | APPåå­—ï¼Œä¸å¡«å†™é»˜è®¤ä½¿ç”¨æ ¹èŠ‚ç‚¹çš„nameã€‚ä¸åŒå¹³å°å¯ä»¥åŠ å‰ç¼€åŒºåˆ†ï¼Œå¦‚ android.name |
| package        | åº”ç”¨çš„åŒ…åã€‚ä¸åŒå¹³å°å¯ä»¥åŠ å‰ç¼€åŒºåˆ†ï¼Œå¦‚ ios.package           |
| android.appkey | DCloudå¹³å°ç”³è¯·çš„ï¼ŒAndroid å¹³å° dcloud_appkeyï¼Œä¸‹æ–¹æœ‰ç”³è¯·åœ°å€ |
| ios.appkey     | DCloudå¹³å°ç”³è¯·çš„ï¼ŒiOS å¹³å° dcloud_appkeyï¼Œä¸‹æ–¹æœ‰ç”³è¯·åœ°å€     |
| versionName    | Appç‰ˆæœ¬åï¼ŒåŒä¸Šå¯ä»¥åŠ å‰ç¼€åŒºåˆ†ä¸åŒå¹³å°ã€‚å¦‚ android.versionName |
| versionCode    | Appç‰ˆæœ¬Codeï¼ŒåŒä¸Šå¯ä»¥åŠ å‰ç¼€åŒºåˆ†ä¸åŒå¹³å°ã€‚å¦‚ ios.versionCode  |
| prepare.dir    | (é€‰å¡«) è‡ªå®šä¹‰ uapp prepare è·å–ç¼–è¯‘èµ„æºçš„è·¯å¾„                |
| prepare.before | (é€‰å¡«) åœ¨ uapp prepare æ‰§è¡Œå‰çš„å‘½ä»¤ã€‚æ¯”å¦‚å¯ä»¥æ‰§è¡Œ npm run build:app å…ˆç¼–è¯‘ vue é¡¹ç›® |
| prepare.after  | (é€‰å¡«) åœ¨ uapp prepare æ‰§è¡Œåçš„å‘½ä»¤ã€‚æ¯”å¦‚å¯ä»¥æ‰§è¡Œ uapp publish debug å‘å¸ƒç¦»çº¿åŒ… |

**å¦‚ä½•ç”³è¯· dcloud_appkey**

[https://nativesupport.dcloud.net.cn/AppDocs/usesdk/appkey](https://nativesupport.dcloud.net.cn/AppDocs/usesdk/appkey)

**å¦‚ä½•ç”³è¯·å¾®ä¿¡ appid**

ç™»å½•å¾®ä¿¡å¼€å‘è€…å¹³å°åˆ›å»ºAPPï¼Œå®¡æ ¸è¿‡åï¼Œè·å– `weixin.appid, weixin.appsecret` ç­‰å‚æ•°ï¼Œç”¨äºå¾®ä¿¡ç™»å½•ï¼Œåˆ†äº«ï¼Œæ”¯ä»˜ç­‰ç›¸å…³å‚æ•°

[https://open.weixin.qq.com/](https://open.weixin.qq.com/)

## è·¨ç«¯å¼€å‘æ³¨æ„äº‹é¡¹

[https://uniapp.dcloud.io/matter.html](https://uniapp.dcloud.io/matter.html)

## iOS è‹¹æœæˆæƒç™»å½•

1ã€è·å–åˆ° team_id, client_id, key_id å¡«å…¥åˆ° jwt/config.json ä¸­ï¼Œå¦‚ä¸‹ï¼š

```
{
    "team_id": "3DSM494K6L",
    "client_id": "com.code0xff.uapp.login",
    "key_id": "3C7FMSZC8Z"
}
```

2ã€ç™»å½•è‹¹æœå¼€å‘è€…è´¦å·ï¼Œåˆ›å»ºå¹¶ä¸‹è½½ç­¾åæ–‡ä»¶ï¼Œ æ”¹åä¸ºjwt/key.txtã€‚

3ã€è¿è¡Œ `uapp info` å‘½ä»¤æŸ¥çœ‹ JWT Token

ğŸ‘‰ å‚è€ƒæ•™ç¨‹: [http://help.jwt.code0xff.com](http://help.jwt.code0xff.com/)

## uapp ä½¿ç”¨å¸®åŠ©

è§ [doc/help.txt](doc/help.txt)

## License

The Apache License 2. Please see [License File](LICENSE.md) for more information.